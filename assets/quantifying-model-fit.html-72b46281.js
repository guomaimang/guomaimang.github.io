import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as s,e}from"./app-de653c6e.js";const t={},i=e(`<h1 id="quantifying-model-fit" tabindex="-1"><a class="header-anchor" href="#quantifying-model-fit" aria-hidden="true">#</a> Quantifying model fit</h1><p>即「量化模型拟合」</p><h2 id="r-squared" tabindex="-1"><a class="header-anchor" href="#r-squared" aria-hidden="true">#</a> r-squared</h2><p>又称「Coefficient of determination」，即测定系数</p><p>由于枯燥的历史原因，简单的线性回归用小写的r，当你有一个以上的解释变量时用大写的R。它被定义为响应变量中可由解释变量预测的方差比例。</p><p>判定系数R<sup>2</sup>是评估回归模型好坏的指标。R平方取值范围也为0~1，通常以百分数表示。比如回归模型的R平方等于0.7，那么表示，此回归模型对预测结果的可解释程度为70%。</p><img src="https://pic.hanjiaming.com.cn/2022/06/16/76fe65149cece.png" alt="1655368481996.png" style="zoom:33%;"><figure><img src="https://pic.hanjiaming.com.cn/2022/06/16/c482e961111c6.png" alt="1655368557189.png" tabindex="0" loading="lazy"><figcaption>1655368557189.png</figcaption></figure><div class="hint-container info"><p class="hint-container-title">使用 .summary() 查看</p><img src="https://pic.hanjiaming.com.cn/2022/06/25/3f093a09f577b.png" alt="1656094775707.png" style="zoom:33%;"></div><p>可通过 .rsquared 计算</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span>mdl_bream<span class="token punctuation">.</span>rsquared<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>0.8780627095147174
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">公式推导</p><p>对于线性回归模型，r<sup>2</sup> 就是 correlation squared。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>coeff_determination <span class="token operator">=</span> bream<span class="token punctuation">[</span><span class="token string">&quot;length_cm&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>corr<span class="token punctuation">(</span>bream<span class="token punctuation">[</span><span class="token string">&quot;mass_g&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>coeff_determination<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>0.8780627095147173
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>r^2 的公式 可由相关系数公式推导出来。下面是相关系数r的计算公式。</p><img src="https://pic.hanjiaming.com.cn/2022/06/20/e9ce8159bbb65.png" alt="1655723715509.png" style="zoom:33%;"></div><h2 id="mse-rmse" tabindex="-1"><a class="header-anchor" href="#mse-rmse" aria-hidden="true">#</a> MSE &amp; RMSE</h2><figure><img src="https://pic.hanjiaming.com.cn/2022/06/25/a7135ebf7ff1c.png" alt="1656096974109.png" tabindex="0" loading="lazy"><figcaption>1656096974109.png</figcaption></figure><ul><li><strong>Mean squared error</strong>「平均平方误差」</li><li><strong>root mean squared error</strong>「平均平方根误差」:残差标准误差（RSE）是对残差的典型大小的衡量。等于说，它是一个衡量你可以期望预测的错误程度的指标。数字越小越好，零是对数据的完美拟合。</li></ul><img src="https://pic.hanjiaming.com.cn/2022/06/16/37a100a0ea5d3.png" alt="1655368802867.png" style="zoom:33%;"><p>RMSE<sup>2</sup> = MSE</p><h3 id="计算-mse" tabindex="-1"><a class="header-anchor" href="#计算-mse" aria-hidden="true">#</a> 计算 MSE</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>mse <span class="token operator">=</span> mdl_bream<span class="token punctuation">.</span>mse_resid
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;mse: &#39;</span><span class="token punctuation">,</span> mse<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>mse: 5498.555084973521
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="手动计算-rse" tabindex="-1"><a class="header-anchor" href="#手动计算-rse" aria-hidden="true">#</a> 手动计算 RSE</h3><div class="hint-container info"><p class="hint-container-title">RSE样本求均值</p><p>RMSE 的是总体求均值，RSE是样本求均值。</p><p>如果是“总体”求平均，那么分母是除以总体的个数。但如果是样本求平均的话，由于样本的目的是估计总体，所以这个时候要对分母进行调整从而使估计更准确。分母不再是除以样本个数，而是除以自由度。这样做的可以使样本估计量满足一致性，进而更准确的估计总体。</p><p>至于自由度是多少这个很难拿语言描述清楚，也没有必要去了解甚至证明，直接当做结论记住即可。</p><p>最常用的自由度是t检验的自由度为n-k-1，也就是样本数量n减去要估计的参数（K+1），其中k是要估计的k个slope coefficient，即b1，b2....bk，而“1”是要估计的1个intercept，即b0。一元线性回归，自由度 = n - 2</p><p>我们通常应当使用 RSE公式 而不是 RMSE公式。</p></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 计算残差，生成残差series, residuals = mdl_bream.resid</span>
<span class="token comment"># mdl_bream 是 fit() 后的模型</span>
residuals_sq <span class="token operator">=</span> mdl_bream<span class="token punctuation">.</span>resid <span class="token operator">**</span> <span class="token number">2</span>
resid_sum_of_sq <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>residuals_sq<span class="token punctuation">)</span>
<span class="token comment"># deg_freedom = 33 - 2</span>
rse <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>resid_sum_of_sq<span class="token operator">/</span>deg_freedom<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;rse :&quot;</span><span class="token punctuation">,</span> rse<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rse : 74.15224261594197
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解释 RSE 的案例：预测的鲷鱼质量和观察到的鲷鱼质量之间的差异通常约为 74 克。(RSE 是与响应变量相关的度量，而不是解释变量。)</p><h3 id="手动计算-rmse" tabindex="-1"><a class="header-anchor" href="#手动计算-rmse" aria-hidden="true">#</a> 手动计算 RMSE</h3><img src="https://pic.hanjiaming.com.cn/2022/06/25/4e75cab2d5139.png" alt="1656100676068.png" style="zoom:33%;">`,28),p=[i];function r(c,o){return a(),s("div",null,p)}const u=n(t,[["render",r],["__file","quantifying-model-fit.html.vue"]]);export{u as default};
