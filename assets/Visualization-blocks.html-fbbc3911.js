import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-92fee486.js";const p={},o=t(`<h1 id="visualization-blocks" tabindex="-1"><a class="header-anchor" href="#visualization-blocks" aria-hidden="true">#</a> Visualization blocks</h1><h2 id="histogram-plus" tabindex="-1"><a class="header-anchor" href="#histogram-plus" aria-hidden="true">#</a> Histogram Plus</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Explore view_count</span>
sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;view_count&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bins<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/77bc7ee63a60e.png" alt="1653932541673.png" tabindex="0" loading="lazy"><figcaption>1653932541673.png</figcaption></figure><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>plt<span class="token punctuation">.</span>clf<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>np<span class="token punctuation">.</span>log<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;view_count&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>hist<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> kde_kws<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;shade&quot;</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlabel<span class="token operator">=</span><span class="token string">&#39;ln(view_count)&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/6f69b2ffd76e0.png" alt="1653932569291.png" tabindex="0" loading="lazy"><figcaption>1653932569291.png</figcaption></figure><h2 id="q-q-plot" tabindex="-1"><a class="header-anchor" href="#q-q-plot" aria-hidden="true">#</a> Q-Q Plot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Explore data[&#39;likes&#39;]/data[&quot;view_count&quot;] 热度 popularity</span>
data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">&#39;likes&#39;</span><span class="token punctuation">]</span> <span class="token operator">/</span> data<span class="token punctuation">[</span><span class="token string">&quot;view_count&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">import</span> kstest
res<span class="token operator">=</span>kstest<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;norm&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>clf<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>scipy<span class="token punctuation">.</span>stats<span class="token punctuation">.</span>normaltest<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
scipy<span class="token punctuation">.</span>stats<span class="token punctuation">.</span>probplot<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dist<span class="token operator">=</span><span class="token string">&quot;norm&quot;</span><span class="token punctuation">,</span> plot<span class="token operator">=</span>plt<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;Q-Q Plot for Video Like Rate&quot;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;&lt;&lt;
KstestResult(statistic=0.07964721538565644, pvalue=8.813513831500901e-129)
NormaltestResult(statistic=6992.485911812571, pvalue=0.0)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/00f6cc00ffdd7.png" alt="1653932616873.png" tabindex="0" loading="lazy"><figcaption>1653932616873.png</figcaption></figure><h2 id="heat-map" tabindex="-1"><a class="header-anchor" href="#heat-map" aria-hidden="true">#</a> Heat Map</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Exploring correlations between data</span>
plt<span class="token punctuation">.</span>clf<span class="token punctuation">(</span><span class="token punctuation">)</span>
fc <span class="token operator">=</span> data<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token string">&quot;dislikes&quot;</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;view_count&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;likes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dislikes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment_count&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span>
mask <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>fc<span class="token punctuation">)</span>
mask<span class="token punctuation">[</span>np<span class="token punctuation">.</span>triu_indices_from<span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>fc<span class="token punctuation">,</span>mask<span class="token operator">=</span>mask<span class="token punctuation">,</span>linewidths<span class="token operator">=</span><span class="token number">.5</span><span class="token punctuation">,</span>vmin<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>vmax<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>fmt<span class="token operator">=</span><span class="token string">&#39;.2f&#39;</span><span class="token punctuation">,</span>cmap<span class="token operator">=</span>sns<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token string">&#39;RdBu_r&#39;</span><span class="token punctuation">,</span>n_colors<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/76f3e052137b2.png" alt="1653932667666.png" tabindex="0" loading="lazy"><figcaption>1653932667666.png</figcaption></figure><h2 id="boxplot" tabindex="-1"><a class="header-anchor" href="#boxplot" aria-hidden="true">#</a> Boxplot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Observation and deleting abnormal rate_likes values</span>
sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

error <span class="token operator">=</span> data<span class="token punctuation">[</span>np<span class="token punctuation">.</span><span class="token builtin">abs</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span> <span class="token operator">-</span> data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">*</span> data<span class="token punctuation">[</span><span class="token string">&quot;rate_likes&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
data <span class="token operator">=</span> data<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>error<span class="token punctuation">.</span>index<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/306a7ff6ec2e4.png" alt="1653932737323.png" tabindex="0" loading="lazy"><figcaption>1653932737323.png</figcaption></figure><h2 id="pie-chart" tabindex="-1"><a class="header-anchor" href="#pie-chart" aria-hidden="true">#</a> Pie chart</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Line<span class="token punctuation">,</span>Pie<span class="token punctuation">,</span>Grid<span class="token punctuation">,</span>Bar<span class="token punctuation">,</span>Page
<span class="token keyword">import</span> pyecharts<span class="token punctuation">.</span>options <span class="token keyword">as</span> opts

play_message <span class="token operator">=</span> data<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;channelTitle&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

play_com <span class="token operator">=</span> play_message<span class="token punctuation">[</span><span class="token string">&#39;channelTitle&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;count&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">&#39;count&#39;</span><span class="token punctuation">,</span>ascending <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">]</span>
play_com<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

attr <span class="token operator">=</span> play_com<span class="token punctuation">[</span><span class="token string">&#39;channelTitle&#39;</span><span class="token punctuation">]</span>
v1 <span class="token operator">=</span> play_com<span class="token punctuation">[</span><span class="token string">&#39;count&#39;</span><span class="token punctuation">]</span>


pie <span class="token operator">=</span> Pie<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token string">&quot;1100px&quot;</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">&quot;600px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

pie<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> v1<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;40%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;70%&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

pie<span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;TOP15 Video Count Channel&quot;</span><span class="token punctuation">,</span> pos_left<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>orient<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span><span class="token punctuation">,</span> pos_left<span class="token operator">=</span><span class="token string">&quot;1%&quot;</span><span class="token punctuation">,</span>pos_bottom<span class="token operator">=</span><span class="token string">&quot;20%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

pie<span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> formatter<span class="token operator">=</span><span class="token string">&quot;{b}: {d}%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

pie<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/4e33c1aa7f680.png" alt="1653932835962.png" tabindex="0" loading="lazy"><figcaption>1653932835962.png</figcaption></figure><h2 id="cumulative-plot" tabindex="-1"><a class="header-anchor" href="#cumulative-plot" aria-hidden="true">#</a> Cumulative Plot</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>item_cum<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">&#39;channelTitle&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&#39;view_count&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x<span class="token operator">=</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>item_cum<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>

line7 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&#39;Percentage of Cumulative view_count&#39;</span><span class="token punctuation">,</span> item_cum<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&#39;Trends in the Percentage of Cumulative view_count by Channel&#39;</span><span class="token punctuation">,</span>pos_left<span class="token operator">=</span><span class="token string">&quot;50%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&#39;Percentage of Cumulative view_count&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&#39;Number of Channel&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts <span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
line7<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/da680a6e6511c.png" alt="1653932907788.png" tabindex="0" loading="lazy"><figcaption>1653932907788.png</figcaption></figure><h2 id="pyecharts-hist" tabindex="-1"><a class="header-anchor" href="#pyecharts-hist" aria-hidden="true">#</a> Pyecharts Hist</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>data<span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token string">&quot;channelTitle&quot;</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;MrBeast&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;view_count&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

data2 <span class="token operator">=</span> data<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&#39;channelTitle&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;view_count&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
data2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data2<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


attr <span class="token operator">=</span> data2<span class="token punctuation">.</span>index<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">]</span>
v1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">&#39;%.1f&#39;</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> data2<span class="token punctuation">[</span><span class="token string">&#39;view_count&#39;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
 
bar <span class="token operator">=</span> Bar<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token string">&quot;800px&quot;</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">&quot;400px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">reversed</span><span class="token punctuation">(</span>attr<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">reversed</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>color <span class="token operator">=</span> <span class="token string">&#39;green&#39;</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> pos_left<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">&quot;18&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>splitline_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>SplitLineOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> position<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/0ba225d296638.png" alt="1653933014606.png" tabindex="0" loading="lazy"><figcaption>1653933014606.png</figcaption></figure><h2 id="pyecharts-line" tabindex="-1"><a class="header-anchor" href="#pyecharts-line" aria-hidden="true">#</a> Pyecharts Line</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Line<span class="token punctuation">,</span>Pie<span class="token punctuation">,</span>Grid<span class="token punctuation">,</span>Bar<span class="token punctuation">,</span>Page
<span class="token keyword">import</span> pyecharts<span class="token punctuation">.</span>options <span class="token keyword">as</span> opts

line1 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>date_view<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&#39;视频平均播放量&#39;</span><span class="token punctuation">,</span> date_view<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&#39;视频平均播放量变化趋势&#39;</span><span class="token punctuation">,</span>pos_left<span class="token operator">=</span><span class="token string">&quot;20%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&#39;视频平均播放量&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts <span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

line2 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>date_comment<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&#39;视频平均评论数量&#39;</span><span class="token punctuation">,</span> date_comment<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&#39;视频平均评论数量变化趋势&#39;</span><span class="token punctuation">,</span>pos_right<span class="token operator">=</span><span class="token string">&quot;20%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&#39;视频平均评论数量&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts <span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

line3 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>date_likes<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&#39;视频平均点赞数&#39;</span><span class="token punctuation">,</span> date_likes<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&#39;视频平均点赞数变化趋势&#39;</span><span class="token punctuation">,</span>pos_top<span class="token operator">=</span><span class="token string">&quot;50%&quot;</span><span class="token punctuation">,</span>pos_left<span class="token operator">=</span><span class="token string">&quot;20%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&#39;视频平均点赞数&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts <span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>


line4 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>date_count<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&#39;趋势视频数量&#39;</span><span class="token punctuation">,</span> date_count<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&#39;趋势视频数量变化趋势&#39;</span><span class="token punctuation">,</span>pos_top<span class="token operator">=</span><span class="token string">&quot;50%&quot;</span><span class="token punctuation">,</span>pos_right<span class="token operator">=</span><span class="token string">&quot;20%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&#39;趋势视频数量&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> feature<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;saveAsImage&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts <span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

grid1 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Grid<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span>line1<span class="token punctuation">,</span> grid_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>GridOpts<span class="token punctuation">(</span>pos_bottom<span class="token operator">=</span><span class="token string">&quot;60%&quot;</span><span class="token punctuation">,</span>pos_right<span class="token operator">=</span><span class="token string">&quot;55%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span>line2<span class="token punctuation">,</span> grid_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>GridOpts<span class="token punctuation">(</span>pos_bottom<span class="token operator">=</span><span class="token string">&quot;60%&quot;</span><span class="token punctuation">,</span>pos_left<span class="token operator">=</span><span class="token string">&quot;55%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span>line3<span class="token punctuation">,</span> grid_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>GridOpts<span class="token punctuation">(</span>pos_top<span class="token operator">=</span><span class="token string">&quot;60%&quot;</span><span class="token punctuation">,</span>pos_right<span class="token operator">=</span><span class="token string">&quot;55%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span>line4<span class="token punctuation">,</span> grid_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>GridOpts<span class="token punctuation">(</span>pos_top<span class="token operator">=</span><span class="token string">&quot;60%&quot;</span><span class="token punctuation">,</span>pos_left<span class="token operator">=</span><span class="token string">&quot;55%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
 <span class="token punctuation">)</span>   
grid1<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://pic.hanjiaming.com.cn/2022/05/31/54d89383a7f09.png" alt="1653933070202.png" tabindex="0" loading="lazy"><figcaption>1653933070202.png</figcaption></figure>`,28),e=[o];function c(u,i){return s(),a("div",null,e)}const r=n(p,[["render",c],["__file","Visualization-blocks.html.vue"]]);export{r as default};
