---
article: false
date: 2024-11-20
index: true
order: 12
headerDepth: 0
---

# Non-Fungible Tokens

## NFT

Non-Fungible Tokens (NFT)

可替代性：各个单位能够相互替代

::: tip 代币的概念

代币是区块链上的数字资产，可以代表各种价值，如货币、资产、权益等。

代币可以分为可替代代币（Fungible Tokens）和不可替代代币（Non-Fungible Tokens, NFTs），它们在性质和用途上有显著差异。

:::

可替代代币（如ERC20代币）是指每个代币都是相同的，并且可以分割成更小的单位。这意味着一个代币可以与另一个代币互换，没有区别。

- 默认情况下，可替代代币使用18个小数位。
  - 这意味着一个完整的代币可以分割成10的18次方个更小的单位。
  - 这种设计允许非常精细的交易。
- 不可替代代币（NFT，如ERC721代币）是指每个代币都是独一无二的，并且通过一个唯一的tokenID进行标识。
  - 这使得NFT能够代表独特的资产，如艺术品、收藏品等。

FT可以代表各种独特的资产，如收藏品、投票权、统一资源标识符（URIs）等。

- URIs可以是HTTP链接或IPFS链接，与tokenID相关联。
- OpenSea是一个流行的NFT交易平台，EIP-721是定义NFT标准的提案。

**NFT是对可替代代币的扩展，增加了唯一性和不可分割性，使其能够代表独特的资产。**

- **NFT是不可分割的，这意味着一个NFT不能被分割成更小的单位。**
- **每个NFT都是一个完整的、独特的实体。**

**Multi-tokens (ERC1155):** 多代币标准（ERC1155）允许在一个智能合约中包含不同类型的代币，包括可替代代币和不可替代代币。

- 一个ERC1155合约可以同时包含多种可替代代币和不可替代代币，使得开发者可以在一个合约中管理多种不同类型的资产。
- 这种设计提高了代币管理的灵活性和效率。

::: info ERC标准

ERC（Ethereum Request for Comments）是以太坊改进提案的缩写，定义了以太坊生态系统中的各种规范和标准。

ERC20和ERC721是两种常见的ERC标准，分别用于定义可替代代币和不可替代代币。

:::

::: details 将数字艺术作品转化为NFT

假设你是一位数字艺术家，想要将你的数字艺术作品转化为NFT，并在OpenSea平台上进行销售。

你需要将你的艺术作品铸造成NFT，

- 这意味着你需要使用ERC721标准创建一个唯一的代币，每个代币代表一件独特的艺术作品。
- 然后，你需要将这些NFT上传到OpenSea平台进行销售。

NFT的唯一性和不可分割性使其非常适合代表独特的艺术作品。通过将你的艺术作品铸造成NFT，你可以确保每个作品都是独一无二的，并且可以在区块链上进行追踪和交易。

1. **创建智能合约**：编写一个符合ERC721标准的智能合约，定义你的NFT。
2. **铸造NFT**：使用智能合约铸造NFT，每个NFT代表一件艺术作品。
3. **上传到OpenSea**：将铸造的NFT上传到OpenSea平台，设置销售价格和其他相关信息。
4. **销售和交易**：在OpenSea平台上进行销售和交易，买家可以通过区块链购买你的NFT。

:::

## ERC20

### 在以太坊上启用可互换代币

可替代代币（如ERC20代币）是指每个代币在价值和功能上都是完全相同的，可以互换。

**例如，一个ERC20代币和另一个ERC20代币在同一合约中具有相同的价值。**

- 从一个账户向其他账户转移代币: ERC20标准定义了一种方法，使得用户可以将代币从一个账户转移到另一个账户。这是通过智能合约中的`transfer`函数实现的
- 获取账户代币余额: ERC20标准提供了一个`balanceOf`函数，允许用户查询特定地址的代币余额
- ERC20标准中的`totalSupply`函数返回代币的总供应量。这表示了该代币在整个区块链网络中的总发行量。
- ERC20标准中的`approve`函数允许代币持有者授权第三方账户在其名下花费一定数量的代币。这通常用于去中心化交易所或其他需要代币授权的应用。
  - 在去中心化交易所Uniswap中，用户需要首先使用`approve`函数授权Uniswap智能合约可以代表用户转移一定数量的代币，以便进行代币交换。
  - 在完成授权后，Uniswap会调用`transferFrom`函数，从用户账户中转移代币到目标账户。这是代币交换过程的一部分。

::: details Example

假设Alice想要在Uniswap上将她的ERC20代币（例如DAI）交换成另一种ERC20代币（例如USDC）。

Alice需要首先批准Uniswap智能合约可以代表她转移一定数量的DAI代币，然后Uniswap智能合约会执行代币交换，将DAI转换成USDC。

这个过程涉及ERC20标准中的`approve`和`transferFrom`函数，Alice需要先使用`approve`函数授权Uniswap智能合约，然后Uniswap智能合约会调用`transferFrom`函数完成代币转移。

1. Alice调用DAI合约的 `approve` 函数，授权Uniswap智能合约可以转移她的100 DAI代币。
   ```solidity
   dai.approve(uniswapContractAddress, 100 * 10**18);
   ```
2. Uniswap智能合约接收到授权后，Alice可以发起代币交换请求。
3. Uniswap智能合约调用`transferFrom`函数，从Alice的账户中转移100 DAI到合约中，并根据当前汇率将等值的USDC转移到Alice的账户中。

:::

### Create Your ERC20

利用现有的合约代码可以大大减少开发时间和出错的几率。OpenZeppelin提供了经过社区验证的安全合约实现，非常适合用来构建自己的ERC20代币。

在创建自己的ERC20代币时，你需要重写构造函数（constructor）。构造函数是在合约部署时执行的特殊函数，用于初始化合约的状态。

::: details Example

假设你想创建一个名为“StudentToken”的ERC20代币，每个代币有18位小数，并且在合约部署时向自己铸造1000个代币。

为了实现这个目标，

- 你需要定义一个合约，继承ERC20标准，
- 并在构造函数中初始化代币的名称、符号和小数位数。
- 同时，你需要在合约部署时铸造1000个代币给自己。

ERC20标准提供了一组通用的方法和事件，使代币能够在不同的dApps之间互操作。**通过继承ERC20合约并重写构造函数，你可以轻松创建符合ERC20标准的代币。**

1. 创建一个新的Solidity文件，命名为`StudentToken.sol`。
2. 导入OpenZeppelin的ERC20合约。
3. 定义一个名为`StudentToken`的合约，并继承ERC20合约。
4. 在构造函数中初始化代币的名称、符号和小数位数。
5. 使用`_mint`函数在合约部署时向自己铸造1000个代币。

::: 

### Extend to DeFi

ERC20代币可以部署在公共区块链上。

- Permissionless：意味着任何人都可以与合约进行交互，不需要得到任何特定实体的授权或许可。
- Transparency「透明度」：例如，Tether在Etherscan上。Tether是一种ERC20代币，其智能合约的字节码和源代码可以在Etherscan上查看。
- Composable「可组合的」：智能合约可以相互组合，形成更复杂的金融产品和服务。
  - 例如，一个交换ERC20代币的合约。这样的合约可以自动执行代币交换操作。
  - Uniswap和其他复杂合约 -> 去中心化交易所/去中心化金融。Uniswap是一个去中心化交易所，允许用户在没有中介的情况下进行代币交换。

### Swap between 2 ERC20 tokens

- Inside contract TokenSwap
- 在智能合约 TokenSwap 内部。
- 



